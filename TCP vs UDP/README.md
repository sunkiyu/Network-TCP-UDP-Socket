![image](https://user-images.githubusercontent.com/68372094/154382949-57135348-ae62-488f-9897-10985512d2f5.png)

# TCP / IP (Transmission Control Protocol/Internet Protocol)
  - TCP 및 IP라고 불리우는 프로토콜을 중심으로 구성되는 일련의 프로토콜들의 총칭

  ※ TCP/IP 프로토콜 군 (protocol suite)
     - 일반적으로 TCP/IP라고 하면, TCP와 IP의 두 프로토콜만을 지칭하지 않고 관련되는 프로토콜 군(Protocol suite, 규약 한벌)을 총칭함
     - TCP/IP에는 100개가 넘는 프로토콜이 존재함
     
# 4. TCP/IP의 망 계층 구조 (4 계층 모델)
- OSI 계층 모델과 비교하여 4계층 모델로 표현
![image](https://user-images.githubusercontent.com/68372094/163954088-e8694815-398c-4e75-b944-f5b03dab8102.png)
![image](https://user-images.githubusercontent.com/68372094/163954190-5ed80ab3-2d78-453c-b2da-3f648fc72aa2.png)
![image](https://user-images.githubusercontent.com/68372094/163954210-b194d6ef-ba6a-4372-b1f6-5422bd3c94fc.png)


     

# TCP
* TCP/IP 프로토콜 중 하나
* 양쪽 종단 호스트의 프로세스 상호 간에 신뢰적인 연결지향 서비스 제공
* IP(비신뢰적) + TCP(신뢰적 연결지향성) 제공, IP에 추가적으로 신뢰적인 전송을 보장

# TCP 주요 특징
* 신뢰성(Reliable)
  - 패킷 손실, 중복이 없도록 하고 순서를 보장함
  - 하위 계층인 IP 계층의 신뢰성 없는 서비스에 신뢰성 제공

* 연결지향적(Connection-oriented)  
  - 같은 전송 계층의 UDP가 비연결지향적인 것과 달리 TCP는 연결지향적임
  - 연결 설정/해제 필요.(3 WayHandShaking, 4wayHandShaking) 각 종단의 어플리케이션/프로세스는 TCP가 제공하는 연결성 회선을 통해 통신  
 
* TCP 연결의 식별, 다중화, 포트번호
  - IP+포트번호로 회선을 식별 함.
  - 2개의 IP 및 2개의 포트 번호에 의해 4개가 하나의 연결(회선) 식별
  - 단일 연결 외에 다수 연결 동시적 처리도 가능
  - TCP는 포트 번호에 의해 어플리케이션과 연결점을 식별

* 전이중 전송방식/양방향성
  - 종단간 양 프로세스가 동시에 세그먼트를 전달 할 수 있음

* 멀티캐스트 불가능 : 단대단 전송 방식 (1:1) 
  - 단일 송신자와 단일 수신자 간에 단일 경로 연결이 설정됨

* 상위 응용과는 바이트 스트림(Byte Stream)으로 주고받음
  - 논리적(의미를 갖는) 단위인 메세지 스트림이 아님
  - 데이터의 경계가 없으며 단순 바이트들의 연속적인 흐름으로 간주하여 이들을 묶어 세그먼트화하여 전송

* 세그먼트화 처리(데이터를 패키징)
  - 바이트들을 모아 세그먼트화하고 TCP 헤더를 붙이고 순서를 제어.
  - TCP 세그먼트란? TCP에서 IP로 전달되는 정보 단위(수 백 바이트 정도)
  - 즉, 양 끝 종단간 TCP 모듈간에 서로 교환되는 데이터 단위를 TCP 세그먼트라고 함.
  - MSS(Maximum Segment Size) TCP 세그먼트를 한 번에 보낼 수 있는 최대 크기.

* 흐름제어 (Flow Control) ※슬라이딩 윈도우
  - 송신 전송률과 수신 처리율 속도를 일치시는 것.
  - 주로, 순서번호(Sequence Number), 확인응답번호(Acknowledge Number), 수신 윈도우 사이즈 3개 변수로 흐름 제어
 
* 혼잡제어 (Congestion Control) 
  - 네트워크가 혼잡하다고 판단될 때 송신률을 감속.
  - 주요 활용 기능 : 느린 시작, 혼잡 회피, 수신 윈도우 및 혼잡 윈도우 크기 결정
  - TCP는 혼잡제어를 위해 수신 윈도우(RWND) 및 혼잡 윈도우(CWND) 2개의 변수를 관리함.
  - 이 중 최소가 되는 크기를 윈도우 크기로 잡게 된다.

* 비 실시간적 응용
  - TCP는 데이터 전달에 대한 보장, But 전달에 따른 지연에는 취약하므로 실시간적 응용에는 통상 UDP를 사용한다.

* TCP 활용
  - 상위 프로토콜 지원 : HTTP, FTP, SMTP 등
  - 응용 지원 : TELNET, rlogin, 웹, 전자우편 등 

# TCP 패킷의 구조 
![image](https://user-images.githubusercontent.com/68372094/163949695-299754ff-2c7c-4828-bfe6-3b9091346725.png)

  - IP Datagram 안에 TCP Data가 캡슐화 됨
  - TCP 패킷 헤더 구성 (기본 20 ~ 최대 60 바이트)
  - TCP 포트의 식별 번호(양단 간의 연결 식별을 IP 및 포트로 함)
  - TCP 연결회선의 제어관리(TCP 제어 플래그) 
  - TCP 연결 관리 기능의 확장(TCP 옵션)      

* TCP가 신뢰성,전송효율성,흐름제어가 있도록 하는 기법들
  - 체크섬(CheckSum) : 전송되는 데이터 손상 여부 점검
  - 순서번호(Sequence Number) 및 확인응답 번호(Ackowledgement 번호)
    => 순서번호 : 순서 보장
    => 확인 응답 번호 : 실제 수신 여부 확인 및 그 다음 순서를 지시함
  - 재전송 및 시간제한 : RTO(Retransmission TimeOut)이 지나거나 중복 ACK 가 도착하면 재전송 시도.
  
 

  ㅇ 재전송 및 시간제한   ☞ TCP 재전송, TCP 타이머
     - 정해진 시간(RTO)이 지나면 또는 중복 ACK가 도착하면 재전송 시도하는 방법 등이 있음.
 
  ※ RTT(Round Trip Time) 왕복 시간 : 1번의 TCP 세그먼트가 보내지면 1번의 확인 응답이 이루어지며 그 시간을 측정.
  ※ RTO 재전송 타임 아웃 시간 : 전송된 한 세그먼트에 대한 확인 응답을 기다려야 하는 시간.
  송신 TCP는 매번 세그먼트를 전송할 때마다 재전송 타이머(RTO)를 가동한다.
  

# UDP (User Datagram Protocol)
* TCP/IP 프로토콜 중 트랜스포트 계층의 통신 프로토콜의 하나 (TCP에 대비됨)
* 신뢰성이 낮은 프로토콜, 완전성 보장 X
* 가상회선 확립 필요없고 유연하며 효율적 응용 데이터 전송에 적합함.

# UDP 주요 기능 및 특징
* 비연결성이며 신뢰성이 없고 순서화되지 않은 Datagram 서비스를 제공한다.
  - 확인응답 없음 : 메세지가 제대로 도착했는지 확인하지 않음(Ackowlegement)
  - 순서제어 없음 : 수신된 메세지의 순서를 맞추지 않음, TCP헤더와 달리 순서번호 필드가 없음
  - 흐름제어 없음 : 흐름 제어를 위한 피드백을 제공하지 않음
  - 오류제어 거의 없음 : 체크섬을 제외한 특별한 오류 검출 및 제어가 없음
  - UDP를 사용하는 프로그램 쪽에서 오류제어 기능을 스스로 갖추어야 한다.
  - 비연결성 : 논리적인 가상회선 연결이 없음(No Handshaking) 
  - 데이터그램 지향의 전송계층용 프로토콜

* 실시간 응용 및 멀티캐스팅 가능
  - 실시간 빠른 요청과 응답이 필요한 실시간 응답에 적합
  - 1:다 여러 다수 지점에 전송 가능 
  - 전송속도 제한 없음
  
* 헤더가 단순함
  - 헤더는 고정크기 8바이트 만을 사용(TCP는 20바이트)
  - 즉, 헤더 처리에 비용이 적게 들음
 
* UDP 위에서 동작되는 다양한 프로토콜들 또는 응용분야
     - TFTP, SNMP, DHCP, NFS, DNS, RIP, NTP, RTP 등

* 데이터 전송 단위  :  메세지
  - TCP의 데이터 전송 단위는 세그먼트라 함

* 최대 데이터 크기
  - 65,507 바이트 = 65,535 바이트 - UDP 헤더 8 바이트 - IP 헤더 20 바이트

# UDP 포멧 구조
* 기본적으로 1개 IP에 1개 UDP 만 수용
* UDP 패킷 구조
![image](https://user-images.githubusercontent.com/68372094/163953292-c8867f61-9d05-4df8-aa34-dc05b09cbbe3.png)


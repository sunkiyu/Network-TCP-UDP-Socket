![image](https://user-images.githubusercontent.com/68372094/154382949-57135348-ae62-488f-9897-10985512d2f5.png)

# TCP
* TCP/IP 프로토콜 중 하나
* 양쪽 종단 호스트의 프로세스 상호 간에 신뢰적인 연결지향 서비스 제공
* IP(비신뢰적) + TCP(신뢰적 연결지향성) 제공, IP에 추가적으로 신뢰적인 전송을 보장

# TCP 주요 특징
* 신뢰성(Reliable)
  - 패킷 손실, 중복이 없도록 하고 순서를 보장함
  - 하위 계층인 IP 계층의 신뢰성 없는 서비스에 신뢰성 제공

* 연결지향적(Connection-oriented)  
  - 같은 전송 계층의 UDP가 비연결지향적인 것과 달리 TCP는 연결지향적임
  - 연결 설정/해제 필요.(3 WayHandShaking, 4wayHandShaking) 각 종단의 어플리케이션/프로세스는 TCP가 제공하는 연결성 회선을 통해 통신  
 
* TCP 연결의 식별, 다중화, 포트번호
  - IP+포트번호로 회선을 식별 함.
  - 2개의 IP 및 2개의 포트 번호에 의해 4개가 하나의 연결(회선) 식별
  - 단일 연결 외에 다수 연결 동시적 처리도 가능
  - TCP는 포트 번호에 의해 어플리케이션과 연결점을 식별

* 전이중 전송방식/양방향성
  - 종단간 양 프로세스가 동시에 세그먼트를 전달 할 수 있음

* 멀티캐스트 불가능 : 단대단 전송 방식 (1:1) 
  - 단일 송신자와 단일 수신자 간에 단일 경로 연결이 설정됨

* 상위 응용과는 바이트 스트림(Byte Stream)으로 주고받음
  - 논리적(의미를 갖는) 단위인 메세지 스트림이 아님
  - 데이터의 경계가 없으며 단순 바이트들의 연속적인 흐름으로 간주하여 이들을 묶어 세그먼트화하여 전송

* 세그먼트화 처리(데이터를 패키징)
  - 바이트들을 모아 세그먼트화하고 TCP 헤더를 붙이고 순서를 제어.
  - TCP 세그먼트란? TCP에서 IP로 전달되는 정보 단위(수 백 바이트 정도)
  - 즉, 양 끝 종단간 TCP 모듈간에 서로 교환되는 데이터 단위를 TCP 세그먼트라고 함.
  - MSS(Maximum Segment Size) TCP 세그먼트를 한 번에 보낼 수 있는 최대 크기.

* 흐름제어 (Flow Control) ※슬라이딩 윈도우
  - 송신 전송률과 수신 처리율 속도를 일치시는 것.
  - 주로, 순서번호(Sequence Number), 확인응답번호(Acknowledge Number), 수신 윈도우 사이즈 3개 변수로 흐름 제어
 
* 혼잡제어 (Congestion Control) 
  - 네트워크가 혼잡하다고 판단될 때 송신률을 감속.
  - 주요 활용 기능 : 느린 시작, 혼잡 회피, 수신 윈도우 및 혼잡 윈도우 크기 결정
  - TCP는 혼잡제어를 위해 수신 윈도우(RWND) 및 혼잡 윈도우(CWND) 2개의 변수를 관리함.
  - 이 중 최소가 되는 크기를 윈도우 크기로 잡게 된다.

* 비 실시간적 응용
  - TCP는 데이터 전달에 대한 보장, But 전달에 따른 지연에는 취약하므로 실시간적 응용에는 통상 UDP를 사용한다.

* TCP 활용
  - 상위 프로토콜 지원 : HTTP, FTP, SMTP 등
  - 응용 지원 : TELNET, rlogin, 웹, 전자우편 등 

# TCP 패킷의 구조 
![image](https://user-images.githubusercontent.com/68372094/163949695-299754ff-2c7c-4828-bfe6-3b9091346725.png)

  - IP Datagram 안에 TCP Data가 캡슐화 됨
  - TCP 패킷 헤더 구성 (기본 20 ~ 최대 60 바이트)
  - TCP 포트의 식별 번호(양단 간의 연결 식별을 IP 및 포트로 함)
  - TCP 연결회선의 제어관리(TCP 제어 플래그) 
  - TCP 연결 관리 기능의 확장(TCP 옵션)      

* TCP가 신뢰성,전송효율성,흐름제어가 있도록 하는 기법들
  - 체크섬(CheckSum) : 전송되는 데이터 손상 여부 점검
  - 순서번호(Sequence Number) 및 확인응답 번호(Ackowledgement 번호)
    => 순서번호 : 순서 보장
    => 확인 응답 번호 : 실제 수신 여부 확인 및 그 다음 순서를 지시함
  - 재전송 및 시간제한 : RTO(Retransmission TimeOut)이 지나거나 중복 ACK 가 도착하면 재전송 시도.
 

  ㅇ 재전송 및 시간제한   ☞ TCP 재전송, TCP 타이머
     - 정해진 시간(RTO)이 지나면 또는 중복 ACK가 도착하면 재전송 시도 등
     - 
  ※ RTT(Round Trip Time) 왕복 시간 : 1번의 TCP 세그먼트가 보내지면 1번의 확인 응답이 이루어지며 그 시간을 측정.
  

